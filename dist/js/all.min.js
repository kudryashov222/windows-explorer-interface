$(function(){var e=$("#contextMenu");$("body").on("contextmenu",".window",function(n){return e.css({display:"block",left:n.pageX,top:n.pageY}),!1}),$("body").on("click",function(){e.hide()}),$(".window").resizable({})});var FoldersModel=function(){var e=this;e.flag=ko.observable(!1),e.itemName=ko.observable(""),e.typechoos=ko.observable(),e.openmenu=ko.observable(""),e.opensubmenu=ko.observable(""),e.home=ko.observable(""),e.num=ko.observable(0),e.num2=ko.observable(0),e.sum=ko.observable(""),e.fils=ko.observableArray([{name:"folder1",type:1,files:[{name:"File 1",type:2},{name:"File 2",type:2}]},{name:"folder2",type:1,files:[{name:"File 3",type:2},{name:"File 4",type:2}]},{name:"folder3",type:1,files:[{name:"File 5",type:2},{name:"File 6",type:2}]},{name:"folder4",type:1,files:[{name:"folder4-1",type:1,files:[{name:"File 12",type:2},{name:"File 13",type:2}]},{name:"File 7",type:2},{name:"File 8",type:2}]},{name:"folder5",type:1,files:[{name:"folder5-1",type:1,files:[{name:"File 14",type:2},{name:"File 15",type:2}]},{name:"File 9",type:2},{name:"File 10",type:2}]}]),e.allItems=ko.observableArray(""),e.homeReset=function(){e.home(""),e.openmenu(""),e.opensubmenu(""),e.allItems("")},e.openFolder=function(n){for(var l in e.fils()){if(e.fils()[l].name==n.name){e.allItems(e.fils()[l].files),e.openmenu(n.name),e.home(1),e.opensubmenu(""),e.flag(!0);var m=e.allItems().length;console.log(e.allItems()),m&&(e.allItems()[m-1].num?1==e.allItems()[m-1].type&&0!==e.num()&&e.num(e.allItems()[m-1].num+1):e.num(0))}for(var o in e.fils()[l].files)e.fils()[l].files[o].name==n.name&&(e.allItems(e.fils()[l].files[o].files),e.opensubmenu(n.name),e.flag(!0))}},e.editing=ko.observable(!0),e.edit=function(){this.editing(!0)},e.addfile=function(){""==e.home()?e.fils.push({name:this.itemName(),type:this.typechoos(),files:[]}):""!==this.itemName()&&this.allItems.indexOf(this.itemName())<0&&e.allItems.push({name:this.itemName(),type:this.typechoos()})};var n=function(e){var n={name:e};return n},l=0;e.addItemFold=function(m){""==e.home()?e.fils.push({name:new n("New Folder(").name+e.num()+")",type:1,files:[],num:e.num()}):e.allItems.push({name:new n("New Folder(").name+e.num()+")",type:1,files:[],num:e.num()}),l+=1,e.num(l)},e.addItemDoc=function(m){e.allItems.push({name:n("New Doc(").name+e.num2()+")",type:2,num:e.num()}),l+=1,e.num2(l)}};ko.applyBindings(new FoldersModel);